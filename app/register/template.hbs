{{page-title 'Register'}}
<Header>Register</Header>

<div class='container'>
  <form {{on 'submit' this.onSubmit}}>

    <div class='mb-3 row'>
      <label for='username' class='col-sm-2 col-form-label'>Username</label>
      <div class='col-sm-10'>
        <input
          id='username'
          type='text'
          class='form-control'
          placeholder='username'
          {{on 'input' (fn this.onPropertyChange 'username')}}
        />
        <div class='validation-container'>
          {{#if this.registerChangeset.error.username}}
            <span class='validation-err'>
              {{this.registerChangeset.error.username.validation}}
            </span>
          {{/if}}
        </div>
      </div>
    </div>
    <div class='mb-3 row'>
      <label for='email' class='col-sm-2 col-form-label'>Email</label>
      <div class='col-sm-10'>
        <input
          id='email'
          type='text'
          class='form-control'
          placeholder='email'
          {{on 'input' (fn this.onPropertyChange 'email')}}
        />
        <div class='validation-container'>
          {{#if this.registerChangeset.error.email}}
            <span class='validation-err'>
              {{this.registerChangeset.error.email.validation}}
            </span>
          {{/if}}
        </div>
      </div>
    </div>
    <div class='mb-3 row'>
      <AvatarChooser @onChange={{(fn this.onPropertyChange 'avatarURL')}} />
    </div>

    <div class='mb-3 row'>
      <label for='photoURL' class='col-sm-2 col-form-label'>Photo URL</label>
      <div class='col-sm-10'>
        <input
          id='photoURL'
          type='text'
          class='form-control'
          placeholder='photoURL'
          {{on 'input' (fn this.onPropertyChange 'photoURL')}}
        />
        <div class='validation-container'>
          {{#if this.registerChangeset.error.photoURL}}
            <span class='validation-err'>
              {{this.registerChangeset.error.photoURL.validation}}
            </span>
          {{/if}}
        </div>
      </div>
    </div>
    <div class='mb-3 row'>
      <label
        for='inputPassword'
        class='col-sm-2 col-form-label'
      >Password</label>
      <div class='col-sm-10'>
        <input
          id='inputPassword'
          type='password'
          class='form-control'
          placeholder='password'
          {{on 'input' (fn this.onPropertyChange 'password')}}
        />
        <div class='validation-container'>
          {{#if this.registerChangeset.error.password}}
            <span class='validation-err'>
              {{this.registerChangeset.error.password.validation}}
            </span>
          {{/if}}
        </div>
      </div>
    </div>
    <div class='mb-3 row'>
      <Shared::Button
        @type='submit'
        class='btn-success'
        @label='Register'
        disabled={{this.shouldBeAbleToRegister}}
      />
    </div>
  </form>
  <div>
    <span>I've got an account </span><LinkTo @route='login'>Login.</LinkTo>
  </div>
</div>